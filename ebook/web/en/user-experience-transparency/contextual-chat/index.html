<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contextual Chat - Dialoguing with AI Team | User Experience Transparency | AI Team Orchestrator</title>
    <meta name="description" content="Chapter 20 of AI Team Orchestrator: Contextual Chat - Dialoguing with AI Team">
    <meta name="robots" content="index, follow">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .chapter-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .chapter-instrument {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .chapter-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #7f8c8d;
            flex-wrap: wrap;
        }
        
        .chapter-title {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 2rem;
            font-weight: 700;
            line-height: 1.2;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
        }
        
        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb span {
            color: #7f8c8d;
            margin: 0 0.5rem;
        }

        /* Content styling */
        .chapter-content {
            line-height: 1.8;
        }

        .chapter-content h3 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
            font-weight: 600;
        }

        .chapter-content p {
            margin-bottom: 1.2rem;
        }

        .chapter-content ul, .chapter-content ol {
            margin-bottom: 1.2rem;
            padding-left: 2rem;
        }

        .chapter-content li {
            margin-bottom: 0.5rem;
        }

        .chapter-content strong {
            font-weight: 600;
            color: #2c3e50;
        }

        .chapter-content em {
            font-style: italic;
            color: #7f8c8d;
        }

        .chapter-content code {
            background: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }

        .chapter-content pre {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border-left: 4px solid #667eea;
        }

        .chapter-content pre code {
            background: none;
            padding: 0;
            color: #2c3e50;
            font-size: 0.9rem;
        }

        .chapter-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .chapter-content th,
        .chapter-content td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .chapter-content th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .chapter-content tr:hover {
            background: #f8f9fa;
        }
        
        /* Reader Tools */
        .reader-tools {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            transition: all 0.3s ease;
            min-width: 60px;
        }
        
        .reader-tools.collapsed {
            width: 60px;
            padding: 0.8rem;
        }
        
        .reader-tool {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
            color: #495057;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        
        .reader-tool:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .reader-tool.active {
            background: #667eea;
            color: white;
        }
        
        .reader-tool-icon {
            font-size: 1.1rem;
            flex-shrink: 0;
        }
        
        .reader-tool-label {
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .collapsed .reader-tool-label {
            display: none;
        }
        
        .reader-tools-toggle {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        /* Reading Progress */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(102, 126, 234, 0.2);
            z-index: 1001;
        }
        
        .reading-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Dark Mode */
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e9ecef;
        }
        
        .dark-mode .container {
            background: rgba(255, 255, 255, 0.05);
            color: #e9ecef;
        }
        
        .dark-mode .chapter-header,
        .dark-mode .chapter-content {
            color: #e9ecef;
        }
        
        .dark-mode .breadcrumb {
            background: rgba(255, 255, 255, 0.1);
            color: #e9ecef;
        }
        
        .dark-mode .reader-tools {
            background: rgba(0, 0, 0, 0.8);
            color: #e9ecef;
        }
        
        .dark-mode .reader-tool {
            color: #e9ecef;
        }
        
        .dark-mode .reader-tool:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .reader-tools {
                right: 10px;
                padding: 0.8rem;
                min-width: 50px;
            }
            
            .reader-tools.collapsed {
                width: 50px;
                padding: 0.6rem;
            }
            
            .reader-tool {
                padding: 0.5rem;
            }
            
            .reader-tool-label {
                font-size: 0.75rem;
            }
        }

        /* Fixed Bookmark Toast */
        .bookmark-toast {
            position: fixed;
            top: 80px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 0.8rem 1.2rem;
            border-radius: 8px;
            z-index: 1002;
            transform: translateX(350px);
            opacity: 0;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
            pointer-events: none;
        }
        
        .bookmark-toast.show {
            transform: translateX(0);
            opacity: 1;
            pointer-events: auto;
        }
        
        .bookmark-toast.error {
            background: #dc3545;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        /* Bookmarks Modal */
        .bookmarks-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        
        .bookmarks-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .bookmarks-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .dark-mode .bookmarks-content {
            background: #1a1a2e;
            color: #e9ecef;
        }
        
        .bookmarks-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #667eea;
        }
        
        .bookmarks-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .dark-mode .bookmarks-title {
            color: #e9ecef;
        }
        
        .close-bookmarks {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .close-bookmarks:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .bookmarks-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .bookmark-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
            background: rgba(102, 126, 234, 0.05);
            transition: all 0.2s ease;
        }
        
        .bookmark-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(5px);
        }
        
        .dark-mode .bookmark-item {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .dark-mode .bookmark-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .bookmark-info {
            flex-grow: 1;
        }
        
        .bookmark-title {
            font-weight: 600;
            color: #2c3e50;
            text-decoration: none;
            font-size: 1rem;
            line-height: 1.4;
        }
        
        .dark-mode .bookmark-title {
            color: #e9ecef;
        }
        
        .bookmark-title:hover {
            color: #667eea;
        }
        
        .bookmark-date {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 0.3rem;
        }
        
        .bookmark-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .bookmark-action {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 5px;
            transition: all 0.2s ease;
            color: #7f8c8d;
        }
        
        .bookmark-action:hover {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }
        
        .empty-bookmarks {
            text-align: center;
            padding: 2rem;
            color: #7f8c8d;
        }
        
        .empty-bookmarks-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .language-select {
            background: transparent;
            border: none;
            color: inherit;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            outline: none;
            min-width: 60px;
        }
        
        .language-select option {
            background: white;
            color: #2c3e50;
        }
        
        .dark-mode .language-select option {
            background: #1a1a2e;
            color: #e9ecef;
        }

        /* Dark Mode - Content Areas */
        .dark-mode .chapter-content h3,
        .dark-mode .chapter-content h4 {
            color: #e9ecef;
        }
        
        .dark-mode .chapter-content p,
        .dark-mode .chapter-content li {
            color: #e9ecef;
        }
        
        .dark-mode .chapter-content strong {
            color: #e9ecef;
        }
        
        /* Dark Mode - Tables */
        .dark-mode table {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .dark-mode th,
        .dark-mode td {
            color: #e9ecef;
            border-bottom-color: rgba(255, 255, 255, 0.1);
        }
        
        .dark-mode th {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Dark Mode - Takeaways and Boxes */
        .dark-mode .key-takeaways-section,
        .dark-mode .insight-box {
            background: rgba(255, 255, 255, 0.05);
            color: #e9ecef;
        }
        
        .dark-mode .key-takeaways-section h4,
        .dark-mode .insight-box p {
            color: #e9ecef;
        }
        
        .dark-mode .key-takeaways-content p {
            color: #e9ecef;
        }

        /* Architecture Icon Styling */
        .architecture-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        /* Architecture Section Styling */
        .architecture-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .architecture-title {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #495057;
        }
        
        .architecture-title h4 {
            margin: 0;
            color: #495057;
        }

        /* Key Takeaways Styling */
        .key-takeaways-section {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .key-takeaways-title {
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .key-takeaways-content {
            line-height: 1.6;
        }
        
        .takeaway-item {
            margin-bottom: 0.5rem;
        }

        /* Industry Insight Styling */
        .insight-box {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 4px solid #28a745;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .insight-box p {
            margin-bottom: 1rem;
        }

        /* Code Section Styling */
        .code-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 4px solid #667eea;
        }

        .code-header {
            margin-bottom: 1rem;
            font-weight: 600;
            color: #495057;
        }

        .code-label {
            font-size: 1.1rem;
            color: #667eea;
        }

        /* Mermaid Container */
        .mermaid {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            text-align: center;
        }
    
        .architecture-section,
        .mermaid {
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: auto;
        }
        
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }

        /* Continue Reading Section */
        .continue-reading-section {
            margin: 2rem 0;
            padding: 1.5rem;
            text-align: center;
            background: linear-gradient(135deg, #667eea10, #764ba210);
            border-radius: 15px;
        }
        
        .continue-reading-header h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        
        .continue-reading-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .continue-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .continue-btn.primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .continue-btn.secondary {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .dark-mode .continue-reading-header h3 {
            color: #e9ecef;
        }
        
        /* PDF/Print Specific Styles - Hide UI Elements */
        @media print {
            .bookmarks-modal,
            .reader-tools,
            .bookmark-toast,
            #bookmarksModal,
            #bookmarkToast {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                z-index: -1000 !important;
            }
        }
            </style>

    <style>
    .contextual-link {
        color: #667eea;
        text-decoration: none;
        font-weight: 500;
        border-bottom: 1px dotted #667eea;
        transition: all 0.2s ease;
    }
    
    .contextual-link:hover {
        color: #5a6fd8;
        border-bottom-style: solid;
    }
    
    .dark-mode .contextual-link {
        color: #9bb5ff;
        border-bottom-color: #9bb5ff;
    }
        
        /* PDF/Print Specific Styles - Hide UI Elements */
        @media print {
            .bookmarks-modal,
            .reader-tools,
            .bookmark-toast,
            #bookmarksModal,
            #bookmarkToast {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                z-index: -1000 !important;
            }
        }
            </style>
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,CiAgICA8c3ZnIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgIDxkZWZzPgogICAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQxIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3NjRiYTI7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPC9kZWZzPgogICAgICAgIDwhLS0gQmFja2dyb3VuZCBjaXJjbGUgLS0+CiAgICAgICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjZ3JhZDEpIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIvPgogICAgICAgIDwhLS0gQUkgQnJhaW4gaWNvbiAtLT4KICAgICAgICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjEzIiByPSI4IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIvPgogICAgICAgIDxjaXJjbGUgY3g9IjEzIiBjeT0iMTEiIHI9IjEiIGZpbGw9IiNmZmYiLz4KICAgICAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjExIiByPSIxIiBmaWxsPSIjZmZmIi8+CiAgICAgICAgPHBhdGggZD0iTTEyIDE1YzEgMiAzIDIgNCAyczMgMCA0LTIiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogICAgICAgIDwhLS0gVGVhbSBvcmNoZXN0cmF0aW9uIGxpbmVzIC0tPgogICAgICAgIDxwYXRoIGQ9Ik04IDI0TDE2IDIwTDI0IDI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgICAgICAgPGNpcmNsZSBjeD0iOCIgY3k9IjI0IiByPSIyIiBmaWxsPSIjZmZmIi8+CiAgICAgICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIyMCIgcj0iMiIgZmlsbD0iI2ZmZiIvPgogICAgICAgIDxjaXJjbGUgY3g9IjI0IiBjeT0iMjQiIHI9IjIiIGZpbGw9IiNmZmYiLz4KICAgIDwvc3ZnPgogICAg">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,CiAgICA8c3ZnIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgIDxkZWZzPgogICAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQxIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3NjRiYTI7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPC9kZWZzPgogICAgICAgIDwhLS0gQmFja2dyb3VuZCBjaXJjbGUgLS0+CiAgICAgICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjZ3JhZDEpIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIvPgogICAgICAgIDwhLS0gQUkgQnJhaW4gaWNvbiAtLT4KICAgICAgICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjEzIiByPSI4IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIvPgogICAgICAgIDxjaXJjbGUgY3g9IjEzIiBjeT0iMTEiIHI9IjEiIGZpbGw9IiNmZmYiLz4KICAgICAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjExIiByPSIxIiBmaWxsPSIjZmZmIi8+CiAgICAgICAgPHBhdGggZD0iTTEyIDE1YzEgMiAzIDIgNCAyczMgMCA0LTIiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogICAgICAgIDwhLS0gVGVhbSBvcmNoZXN0cmF0aW9uIGxpbmVzIC0tPgogICAgICAgIDxwYXRoIGQ9Ik04IDI0TDE2IDIwTDI0IDI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgICAgICAgPGNpcmNsZSBjeD0iOCIgY3k9IjI0IiByPSIyIiBmaWxsPSIjZmZmIi8+CiAgICAgICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIyMCIgcj0iMiIgZmlsbD0iI2ZmZiIvPgogICAgICAgIDxjaXJjbGUgY3g9IjI0IiBjeT0iMjQiIHI9IjIiIGZpbGw9IiNmZmYiLz4KICAgIDwvc3ZnPgogICAg">
    <link rel="canonical" href="https://books.danielepelleri.com/en/user-experience-transparency/contextual-chat/" />
</head>
<body>
    <div class="container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <a href="../../ai-team-orchestrator.html">üè† AI Team Orchestrator</a>
            <span>‚Ä∫</span>
            <a href="../">üéπ User Experience & Transparency</a>
            <span>‚Ä∫</span>
            <span>Contextual Chat - Dialoguing with AI Team</span>
        </nav>
        <header class="chapter-header">
            <div class="chapter-instrument">üéπ</div>
            <div class="chapter-meta">
                <span>Movement 3 of 4</span>
                <span>Chapter 20 of 42</span>
                <span>Ready to Read</span>
            </div>
            <h1 class="chapter-title">Contextual Chat - Dialoguing with AI Team</h1>
        </header>

        <div class="chapter-content">
            <p>Our system was a powerful and autonomous engine, but its interface was still rudimentary. Users could see goals and deliverables, but interaction was limited. To fully realize our vision of a "digital colleagues team", we needed to give users a way to <strong>dialogue</strong> with the system naturally.</p>

            <p>We didn't want a simple chatbot. We wanted a true <strong>Conversational Project Manager</strong>, an interface capable of understanding user requests in the project context and translating them into concrete actions.</p>

            <h3># <strong>The Architectural Decision: A Dedicated Conversational Agent</strong></h3>

            <p>The question was: where should we place this conversational capability? We had several options:</p>

            <ul>
            <li><strong>Option A:</strong> Add chat logic directly to our REST endpoints</li>
            <li><strong>Option B:</strong> Create a monolithic "chat service" that handles everything</li>
            <li><strong>Option C:</strong> Create a specialized conversational agent that follows our established patterns</li>
            </ul>

            <p>Option C was the clear winner. By treating conversation as a specialized skill requiring its own agent, we maintained consistency with our architectural philosophy while gaining several key benefits:</p>

            <div class="insight-box">
            <p><strong>üí° Why a Dedicated Conversational Agent?</strong></p>
            <p>1. <strong>Specialization:</strong> Conversation requires unique skills (context management, intent recognition, natural language understanding)<br>
            2. <strong>State Management:</strong> Unlike stateless task agents, conversations need persistent memory and context<br>
            3. <strong>Tool Orchestration:</strong> The conversational agent acts as a conductor, deciding which specialized tools to use based on user intent<br>
            4. <strong>Consistent Architecture:</strong> Follows our "agent for every specialized capability" pattern</p>
            </div>

            <p>Instead of adding scattered chat logic in our endpoints, we followed our specialization pattern and created a new fixed agent: the <code>SimpleConversationalAgent</code>.</p>

            <p><em>Reference code: <code>backend/agents/conversational.py</code> (hypothetical)</em></p>

            <p>This agent is unique for two reasons:</p>

            <ol>
            <li><strong>It's Stateful:</strong> Unlike other agents that are mostly stateless (receive a task, execute it and finish), the conversational agent maintains a history of the current conversation, thanks to the SDK's <code>Session</code> primitive.</li>
            <li><strong>It's a Tool Orchestrator:</strong> Its main purpose is not to generate content, but to understand the user's <strong>intent</strong> and orchestrate the execution of appropriate tools to satisfy it.</li>
            </ol>

            <p><strong>Conversation Flow:</strong></p>

            <div class="architecture-section">
                <div class="architecture-title">
                    <svg class="architecture-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <line x1="9" y1="9" x2="15" y2="9"/>
                        <line x1="9" y1="12" x2="15" y2="12"/>
                        <line x1="9" y1="15" x2="15" y2="15"/>
                    </svg>
                    <h4>System Architecture</h4>
                </div>
                
                <div class="mermaid">
                    graph TD
                        A[User Sends Message:<br/>Add ‚Ç¨1000 to budget]
                        B{Conversational Endpoint}
                        C[Load Workspace and<br/>Conversation Context]
                        D{ConversationalAgent<br/>analyzes intent}
                        E{AI decides to use the<br/>modify_configuration tool}
                        F[SDK formats tool call with parameters:<br/>amount: 1000, operation: increase]
                        G{Executor executes the tool}
                        H[Action Result]
                        I{ConversationalAgent<br/>formulates response}
                        J[Response to User:<br/>OK, I've increased the budget.<br/>The new total is ‚Ç¨4000.]
                        
                        A --> B
                        B --> C
                        C --> D
                        D --> E
                        E --> F
                        F --> G
                        G --> H
                        H --> I
                        I --> J
                        
                        D -.->|Intent: modify_budget| E
                        G -.->|Tool updates DB| H
                </div>
            </div>

            <h3># <strong>UI Architecture: Fixed vs Dynamic Chats</strong></h3>

            <p>To make the conversational interface truly effective, we implemented a dual-chat architecture that reflects the different types of interactions users need with the system:</p>

            <div class="insight-box">
            <p><strong>üîß Fixed Chats (System Management)</strong></p>
            <p>These are persistent, specialized chats for specific system aspects:</p>
            <ul>
            <li><strong>Team Management:</strong> Add members, update skills, manage roles</li>
            <li><strong>Configuration:</strong> Modify budget, timeline, priorities, settings</li>
            <li><strong>Knowledge Base:</strong> Search documentation, best practices, lessons learned</li>
            <li><strong>Tools & Integrations:</strong> Manage available tools, check capabilities</li>
            </ul>
            <p>Each fixed chat maintains long-term context and specialized knowledge about its domain.</p>
            </div>

            <div class="insight-box">
            <p><strong>üéØ Dynamic Chats (Goal Management)</strong></p>
            <p>These are created on-demand for specific goals or projects:</p>
            <ul>
            <li><strong>Goal-Oriented:</strong> Each chat focuses on achieving a specific objective</li>
            <li><strong>Lifecycle-Bound:</strong> The chat exists for the duration of the goal</li>
            <li><strong>Context-Rich:</strong> Maintains deep context about progress, obstacles, and decisions</li>
            <li><strong>Outcome-Focused:</strong> Designed to drive toward deliverable completion</li>
            </ul>
            </div>

            <p>This architecture allows users to seamlessly switch between managing the system (fixed chats) and driving project outcomes (dynamic chats), each with appropriate context and capabilities.</p>

            <h3># <strong>Power User Feature: Slash Commands</strong></h3>

            <p>To accelerate expert user workflows, we implemented a slash command system that provides rapid access to common tools and information. Users can type <code>/</code> to see available commands:</p>

            <div class="code-section">
            <div class="code-header">
            <span class="code-label">Available Slash Commands</span>
            </div>
            <table>
            <thead>
            <tr>
            <th>Command</th>
            <th>Description</th>
            <th>Use Case</th>
            </tr>
            </thead>
            <tbody>
            <tr>
            <td><code>/show_project_status</code></td>
            <td>üìä View Project Status</td>
            <td>Get comprehensive project overview and metrics</td>
            </tr>
            <tr>
            <td><code>/show_team_status</code></td>
            <td>üë• View Team Status</td>
            <td>See current team composition and activities</td>
            </tr>
            <tr>
            <td><code>/show_goal_progress</code></td>
            <td>üéØ View Goal Progress</td>
            <td>Check progress on specific objectives</td>
            </tr>
            <tr>
            <td><code>/show_deliverables</code></td>
            <td>üì¶ View Deliverables</td>
            <td>See completed deliverables and assets</td>
            </tr>
            <tr>
            <td><code>/approve_all_feedback</code></td>
            <td>‚úÖ Approve All Feedback</td>
            <td>Bulk approve pending feedback requests</td>
            </tr>
            <tr>
            <td><code>/add_team_member</code></td>
            <td>‚ûï Add Team Member</td>
            <td>Add new member with specific role and skills</td>
            </tr>
            <tr>
            <td><code>/create_goal</code></td>
            <td>üéØ Create Goal</td>
            <td>Define new project objectives</td>
            </tr>
            <tr>
            <td><code>/fix_workspace_issues</code></td>
            <td>üîß Fix Workspace Issues</td>
            <td>Restart failed tasks and resolve issues</td>
            </tr>
            </tbody>
            </table>
            </div>

            <p>These commands transform natural language requests into precise tool calls, dramatically reducing the cognitive load for frequent operations.</p>

            <h3># <strong>Standard Artifacts: Beyond Conversation</strong></h3>

            <p>While conversation is powerful, some interactions are better handled through structured interfaces. We developed a set of standard artifacts that users can access through conversation or directly through the UI:</p>

            <div class="insight-box">
            <p><strong>üé≠ Team Management Artifacts</strong></p>
            <ul>
            <li><strong>Agent Skill Radar Charts:</strong> Visual representation of individual agent capabilities using our <code>AgentSkillRadarChart</code> component</li>
            <li><strong>Team Composition Matrix:</strong> Skills coverage analysis across the entire team</li>
            <li><strong>Workload Distribution:</strong> Real-time view of task assignments and agent utilization</li>
            <li><strong>Performance Metrics:</strong> Success rates, completion times, quality scores per agent</li>
            </ul>
            </div>

            <div class="insight-box">
            <p><strong>üéØ Project Orchestration Artifacts</strong></p>
            <ul>
            <li><strong>Goal Hierarchy Visualizer:</strong> Interactive tree view of objectives and sub-goals</li>
            <li><strong>Task Dependencies Graph:</strong> Network visualization of task relationships and blockers</li>
            <li><strong>Progress Heatmaps:</strong> Time-based view of project velocity and bottlenecks</li>
            <li><strong>Deliverable Pipeline:</strong> Status and readiness of project outputs</li>
            </ul>
            </div>

            <div class="insight-box">
            <p><strong>üõ†Ô∏è Tools & Integrations Artifacts</strong></p>
            <ul>
            <li><strong>Tool Registry Dashboard:</strong> Available tools, usage patterns, success rates</li>
            <li><strong>Integration Health Monitor:</strong> Status of external services and APIs</li>
            <li><strong>Capability Matrix:</strong> Which agents can use which tools effectively</li>
            <li><strong>Usage Analytics:</strong> Tool performance and optimization opportunities</li>
            </ul>
            </div>

            <div class="insight-box">
            <p><strong>‚úÖ Quality Assurance Artifacts</strong></p>
            <ul>
            <li><strong>Feedback Request Queue:</strong> Pending human reviews and approvals</li>
            <li><strong>Quality Metrics Dashboard:</strong> Completion rates, revision cycles, user satisfaction</li>
            <li><strong>Enhancement Tracking:</strong> Improvement suggestions and their implementation status</li>
            <li><strong>Risk Assessment Matrix:</strong> Identified issues and mitigation strategies</li>
            </ul>
            </div>

            <p>Each artifact is designed to be both standalone (accessible via direct URL) and conversationally integrated (can be requested through chat).</p>

            <h3># <strong>The Heart of the System: The Agnostic Service Layer</strong></h3>

            <p>One of the biggest challenges was how to allow the conversational agent to perform actions (like modifying the budget) without tightly coupling it to database logic.</p>

            <p>The solution was to create an agnostic <strong>Service Layer</strong>.</p>

            <p><em>Reference code: <code>backend/services/workspace_service.py</code> (hypothetical)</em></p>

            <p>We created an interface (<code>WorkspaceServiceInterface</code>) that defines high-level business actions (e.g., <code>update_budget</code>, <code>add_agent_to_team</code>). Then, we created a concrete implementation of this interface for Supabase (<code>SupabaseWorkspaceService</code>).</p>

            <p>The conversational agent knows nothing about Supabase. It simply calls <code>workspace_service.update_budget(...)</code>. This respects <strong>Pillar #14 (Modular Tool/Service-Layer)</strong> and would allow us in the future to change databases by modifying only one class, without touching the agent logic.</p>

            <h3># <strong>"War Story": The Forgetful Chat</strong></h3>

            <p>Our early chat versions were frustrating. The user asked: "What's the project status?", the AI responded. Then the user asked: "And what are the risks?", and the AI responded: "Which project?". The conversation had no <strong>memory</strong>.</p>

            <p><em>Disaster Logbook (July 29):</em></p>

            <pre><code class="language-text">USER: "Show me the team members."
AI: "Sure, the team consists of Marco, Elena and Sara."
USER: "OK, add a QA Specialist."
AI: "Which team do you want to add them to?"</code></pre>

            <p><strong>The Lesson Learned: Context is Everything.</strong></p>

            <p>A conversation without context is not a conversation, it's a series of isolated exchanges. The solution was to implement a robust <strong>Context Management Pipeline</strong>.</p>

            <ol>
            <li><strong>Initial Context Loading:</strong> When the user opens a chat, we load a "base context" with key workspace information.</li>
            <li><strong>Continuous Enrichment:</strong> With each message, the context is updated not only with message history, but also with the results of executed actions.</li>
            <li><strong>Summarization for Long Contexts:</strong> To avoid exceeding model token limits, we implemented logic that, for very long conversations, "summarizes" older messages, keeping only salient information.</li>
            </ol>

            <p>This transformed our chat from a simple command interface to a true intelligent and contextual dialogue.</p>

            <div class="key-takeaways-section">
                <h4 class="key-takeaways-title">üìù Chapter Key Takeaways:</h4>
                <div class="key-takeaways-content">
                    <p class="takeaway-item">‚úì <strong>Treat Chat as an Agent, Not an Endpoint:</strong> A robust conversational interface requires a dedicated agent that handles state, intent, and tool orchestration.</p>
                    <p class="takeaway-item">‚úì <strong>Decouple Actions from Business Logic:</strong> Use a Service Layer to prevent your conversational agents from being tightly coupled to your database implementation.</p>
                    <p class="takeaway-item">‚úì <strong>Context is King of Conversation:</strong> Invest time in creating a solid context management pipeline. It's the difference between a frustrating chatbot and an intelligent assistant.</p>
                    <p class="takeaway-item">‚úì <strong>Design for Long and Short-Term Memory:</strong> Use the SDK's <code>Session</code> for short-term memory (current conversation) and your <code>WorkspaceMemory</code> for long-term knowledge.</p>
                </div>
            </div>

            <p><strong>Chapter Conclusion</strong></p>

            <p>With an intelligent conversational interface, we finally had an intuitive way for users to interact with our system's power. But it wasn't enough. To truly gain user trust, we needed to take one more step: we had to open the "black box" and show them <em>how</em> the AI reached its conclusions. It was time to implement <strong>Deep Reasoning</strong>.</p>
        </div>

        <!-- Reader Tools -->
        <div class="reader-tools" id="readerTools">
            <button class="reader-tools-toggle" onclick="toggleReaderTools()">‚öô</button>
            <div class="reader-tool" onclick="toggleTheme()">
                <span class="reader-tool-icon" id="themeIcon">üåô</span>
                <span class="reader-tool-label">Theme</span>
            </div>
            <div class="reader-tool" onclick="toggleBookmark()">
                <span class="reader-tool-icon">üîñ</span>
                <span class="reader-tool-label">Bookmark</span>
            </div>
            <div class="reader-tool" onclick="showBookmarks()">
                <span class="reader-tool-icon">üìö</span>
                <span class="reader-tool-label">My Bookmarks</span>
            </div>
            <div class="reader-tool">
                <span class="reader-tool-icon">üåê</span>
                <select class="language-select" onchange="switchLanguage(this.value)">
                    <option value="en" selected>English</option>
                    <option value="it">Italiano</option>
                </select>
            </div>
            <div class="reader-tool" onclick="showFontSizeMenu()">
                <span class="reader-tool-icon">üî§</span>
                <span class="reader-tool-label">Font Size</span>
            </div>
        </div>

        <div class="reading-progress">
            <div class="reading-progress-fill" id="progressFill"></div>
        </div>
        
        <!-- Bookmark Toast -->
        <div class="bookmark-toast" id="bookmarkToast">
            <span id="bookmarkMessage">Bookmark saved!</span>
        </div>

        <!-- Bookmarks Modal -->
        <div class="bookmarks-modal" id="bookmarksModal" onclick="if(event.target === this) closeBookmarksModal()">
            <div class="bookmarks-content">
                <div class="bookmarks-header">
                    <h3 class="bookmarks-title">üìö My Bookmarks</h3>
                    <button class="close-bookmarks" onclick="closeBookmarksModal()">√ó</button>
                </div>
                <div class="bookmarks-list" id="bookmarksList">
                </div>
            </div>
        </div>
    
        <!-- Continue Reading Section -->
        <div class="continue-reading-section">
            <div class="continue-reading-header">
                <h3>üìö Continue Reading</h3>
            </div>
            <div class="continue-reading-actions">
                <a href="../../ai-team-orchestrator.html" class="continue-btn primary">
                    <span class="btn-icon">üè†</span>
                    <span class="btn-text">Back to Guide</span>
                </a>
                <a href="../" class="continue-btn secondary">
                    <span class="btn-icon">üéπ</span>
                    <span class="btn-text">Explore Movement</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        // Reader Tools JavaScript
        let readerToolsCollapsed = false;
        
        // Initialize reader tools
        document.addEventListener('DOMContentLoaded', function() {
            initializeReaderTools();
            updateReadingProgress();
            loadUserPreferences();
        });
        
        // Toggle reader tools visibility
        function toggleReaderTools() {
            const tools = document.getElementById('readerTools');
            readerToolsCollapsed = !readerToolsCollapsed;
            
            if (readerToolsCollapsed) {
                tools.classList.add('collapsed');
            } else {
                tools.classList.remove('collapsed');
            }
            
            localStorage.setItem('readerToolsCollapsed', readerToolsCollapsed);
        }
        
        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const isDarkMode = body.classList.contains('dark-mode');
            
            if (isDarkMode) {
                body.classList.remove('dark-mode');
                themeIcon.textContent = 'üåô';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'dark');
            }
        }
        
        // Bookmark functionality
        function toggleBookmark() {
            const currentPage = window.location.pathname;
            const pageTitle = document.querySelector('.chapter-title').textContent;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            const existingIndex = bookmarks.findIndex(b => b.url === currentPage);
            
            if (existingIndex > -1) {
                bookmarks.splice(existingIndex, 1);
                showToast('Bookmark removed!', 'error');
            } else {
                bookmarks.push({
                    url: currentPage,
                    title: pageTitle,
                    timestamp: new Date().toISOString()
                });
                showToast('Bookmark saved!', 'success');
            }
            
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
        }
        
        // Language switching
        function switchLanguage(lang) {
            const currentPath = window.location.pathname;
            let newPath;
            
            if (lang === 'en') {
                newPath = currentPath.replace(/\/it\//, '/en/')
                    .replace('user-experience-trasparenza', 'user-experience-transparency')
                    .replace('chat-contestuale-dialogare-team-ai', 'contextual-chat');
            } else if (lang === 'it') {
                newPath = currentPath.replace(/\/en\//, '/it/')
                    .replace('user-experience-transparency', 'user-experience-trasparenza')
                    .replace('contextual-chat', 'chat-contestuale-dialogare-team-ai');
            }
            
            if (newPath && newPath !== currentPath) {
                window.location.href = newPath;
            }
        }
        
        // Font size menu (simplified)
        function showFontSizeMenu() {
            const currentSize = localStorage.getItem('fontSize') || 'medium';
            let newSize;
            
            switch (currentSize) {
                case 'small':
                    newSize = 'medium';
                    break;
                case 'medium':
                    newSize = 'large';
                    break;
                case 'large':
                    newSize = 'small';
                    break;
                default:
                    newSize = 'medium';
            }
            
            setFontSize(newSize);
            localStorage.setItem('fontSize', newSize);
            showToast(`Font size: ${newSize}`, 'success');
        }
        
        // Set font size
        function setFontSize(size) {
            const root = document.documentElement;
            const sizes = {
                'small': 0.9,
                'medium': 1.0,
                'large': 1.1
            };
            root.style.fontSize = sizes[size] + 'em';
        }
        
        // Show toast notification (improved)
        function showToast(message, type = 'success') {
            const toast = document.getElementById('bookmarkToast');
            const messageEl = document.getElementById('bookmarkMessage');
            
            if (!toast || !messageEl) return;
            
            // Clear any existing timeouts
            if (window.toastTimeout) {
                clearTimeout(window.toastTimeout);
            }
            
            // Reset classes and set message
            toast.classList.remove('show', 'error');
            messageEl.textContent = message;
            
            // Add appropriate classes
            if (type === 'error') {
                toast.classList.add('error');
            }
            
            // Show toast
            toast.classList.add('show');
            
            // Hide after delay
            window.toastTimeout = setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Reading progress
        function updateReadingProgress() {
            const progressFill = document.getElementById('progressFill');
            
            window.addEventListener('scroll', () => {
                const article = document.querySelector('.chapter-content');
                if (!article) return;
                
                const articleTop = article.offsetTop;
                const articleHeight = article.offsetHeight;
                const windowHeight = window.innerHeight;
                const scrollTop = window.pageYOffset;
                
                const progress = Math.min(100, Math.max(0, 
                    ((scrollTop + windowHeight - articleTop) / articleHeight) * 100
                ));
                
                progressFill.style.width = progress + '%';
            });
        }
        
        // Load user preferences
        function loadUserPreferences() {
            // Load theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
            }
            
            // Load font size
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                setFontSize(savedFontSize);
            }
            
            // Load reader tools state
            const toolsCollapsed = localStorage.getItem('readerToolsCollapsed') === 'true';
            if (toolsCollapsed) {
                document.getElementById('readerTools').classList.add('collapsed');
                readerToolsCollapsed = true;
            }
        }
        
        // Initialize reader tools
        function initializeReaderTools() {
            // Check if current page is bookmarked
            const currentPage = window.location.pathname;
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            const isBookmarked = bookmarks.some(b => b.url === currentPage);
            
            if (isBookmarked) {
                document.querySelector('.reader-tool[onclick*="toggleBookmark"]').classList.add('active');
            }
        }
        
        // Show bookmarks modal
        function showBookmarks() {
            const modal = document.getElementById('bookmarksModal');
            const bookmarksList = document.getElementById('bookmarksList');
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            
            if (bookmarks.length === 0) {
                bookmarksList.innerHTML = `
                    <div class="empty-bookmarks">
                        <div class="empty-bookmarks-icon">üìö</div>
                        <h3>No bookmarks saved</h3>
                        <p>Start saving your favorite chapters by clicking the bookmark icon üîñ</p>
                    </div>`;
            } else {
                bookmarksList.innerHTML = bookmarks.map(bookmark => `
                    <div class="bookmark-item">
                        <div class="bookmark-info">
                            <a href="${bookmark.url}" class="bookmark-title">${bookmark.title}</a>
                            <div class="bookmark-date">${new Date(bookmark.timestamp).toLocaleDateString()}</div>
                        </div>
                        <div class="bookmark-actions">
                            <button class="bookmark-action" onclick="deleteBookmark('${bookmark.url}')">üóëÔ∏è</button>
                        </div>
                    </div>
                `).join('');
            }
            
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }
        
        function closeBookmarksModal() {
            const modal = document.getElementById('bookmarksModal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
        }
        
        function deleteBookmark(url) {
            let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            bookmarks = bookmarks.filter(b => b.url !== url);
            localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
            showToast('Bookmark removed!', 'error');
            showBookmarks(); // Refresh the modal
        }
    </script>

    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#667eea',
                lineColor: '#7f8c8d',
                secondaryColor: '#f8f9fa',
                tertiaryColor: '#ffffff'
            }
        });
    </script>
</body>
</html>